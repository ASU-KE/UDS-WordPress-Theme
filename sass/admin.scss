@import "../src/sass/design-tokens/variables";
@import "../src/sass/extends/list";

/*--------------------------------------------------------------
# Admin CSS fixes.
Enqueued only within the admin screen. (Via enqueue.php)

1. Menus, draggable items
2. Font Awesome fixes for Gutenberg
--------------------------------------------------------------*/

section.bg {
	min-height: 90px;
}

/*-------------------------------------------------------------------
1. Menus. Change color of draggable menu items that are too deep.
--------------------------------------------------------------------*/

// default error color (in case we ever want to manipulate it within the loop).
$warning-color: #f99;

// create 10 classes to cover menu levels 3 through 13
@for $i from 3 through 13 {
	// target the .menu-item-handle, which is the draggable box.
	.menu-item-depth-#{$i} .menu-item-bar .menu-item-handle {
		// apply our warning color
		background-color: $warning-color;

		// the text 'sub-item' is a sibling span with the class .is-submenu
		// We append some warning text using the ::after psuedo element.
		.is-submenu::after {
			content: " - too deep!";
		}

		// the item title, by default, as a very wide right marging (13em!)
		// to allow more room for our warning text, we reduce this margin
		.item-title {
			margin-right: 5em;
		}
	}
}

/*-------------------------------------------------------------------
2. Font Awesome fixes for Gutenberg
--------------------------------------------------------------------*/

// The front-end contains a vertical-align rule that helps to align
// icons with the text. Because of the '.editor-styles-wrapper' on the
// editor side, it was not working. Added that same rule, specifically
// targeting Fontawesome SVG icons inside the Gutenberg styles wrapper
// so that we get the same look while editing.
.editor-styles-wrapper svg.svg-inline--fa {
	vertical-align: -0.125rem;
}

/*-------------------------------------------------------------------
3. UDS Grid Links, Admin
--------------------------------------------------------------------*/
// Selecting this block from the Gutenberg editor poses a challenge
// with the wide target of each box functioning as an actual link.
// This should prevent accidentally activating a link from the grid.
.acf-block-preview .uds-grid-links a {
	pointer-events: none;
}

.card {
	max-width: none;
}

.acf-block-preview .uds-tabbed-panels {
	a.scroll-control-prev,
	a.scroll-control-next {
		display: none;
	}
}

/*-------------------------------------------------------------------
4. UDS Profile Block, Admin
--------------------------------------------------------------------*/
// A copy of the front-end styles applied to the ACF block preview.
// The one changes is having no pointer events in the editor.
// This avoids accidentally clicking images, links, etc. by accident.
.acf-block-preview {
	.profile.profile-type-standard {

		// Vertical style gets a column flex and some spacing adjustments.
		&.vertical {

			height: 100%;

			.profile-row {
				display: flex;
				flex-direction: column;
				padding: 0;
				height: 100%;
				pointer-events: none;

				.profile-photo-column {
					padding: 0;
				}

				.profile-bio-column  {
					display: flex;
					flex-direction: column;
					height: 100%;
					justify-content: space-between;
					max-width: 270px;
					padding: 0 1rem 0 0;

					.profile-name {
						margin-top: $uds-size-spacing-2;
					}

					.profile-email-link {
						word-break: break-all;
					}

					.profile-contact-row {
						p {
							margin-bottom: 0.5rem;
						}
						display: flex;
						flex-direction: column;
						// Remove right margin used on the desktop version
						&> div {
							margin-right: 0;
							}
					}
				}
			}
		}

		// The actual content row.
		.profile-row {
			padding-bottom: $uds-size-spacing-4;
			padding-top: $uds-size-spacing-4;
			display: flex;
			pointer-events: none;

			// Column containing the profile image.
			.profile-photo-column {
				padding: $uds-size-spacing-3 $uds-size-spacing-3 $uds-size-spacing-3 0;

				// Image style: fixed dimensions and object-fit rule for consistency.
				// April 2022: Added additional width rules to fix image size CSS from WordPress.
				img.pictureOriginal {
					border-radius: 500px;
					height: 180px;
					margin-top: 0;
					max-height: 180px;
					max-width: 180px;
					min-height: 180px;
					min-width: 180px;
					object-fit: cover;
					width: 180px;
				}

				img.pictureOriginal.feature-profile {
					height: 270px;
					min-height: 270px;
					max-height: 270px;
					width: 270px;
					min-width: 270px;
					max-width: 270px;
				}

				// Feature profile image size is too big on mobile. Make it the same as normal profiles.
				@media only screen and (max-width: $uds-breakpoint-md) {
					img.pictureOriginal.feature-profile {
						height: 180px;
						min-height: 180px;
						max-height: 180px;
						width: 180px;
						min-width: 180px;
						max-width: 180px;
					}
				}
			}

			// Column with everything but the image.
			.profile-bio-column {
				max-width: 700px;

				// Row with email/phone/address.
				.profile-contact-row {
					display: flex;
					// Adds right margin to child <div> elements in the contact row.
					&> div {
						margin-right: $uds-size-spacing-4;
						}
				}

				// Styles for the person's name and title.
				.profile-name {
					margin-top: 24px;
				}

				.profile-bio-details {
					.profile-title {
						font-weight: $uds-font-weight-bold;
					}
				}

				// Social media icons.
				ul.person_social_medias {

					// Make the list horizontal and add margin at the bottom.
					list-style-type: none;
					display: flex;
					flex-wrap: wrap;
					column-gap: $uds-size-spacing-2;
					row-gap: $uds-size-spacing-1;
					padding-left: 0;
					margin-bottom: 0;

					li {

						a {
							// Override UDS desire to make these maroon and set font size.
							color: #191919;
							font-size: 1.75rem;
						}
					}
				}
			}
		}
	}
}

/*-------------------------------------------------------------------
5. UDS List Block, Admin

.editor-styles-wrapper {
	ul:not(.uds-list),
	ol:not(.uds-list),
	ul.wp-block-list:not(.uds-list),
	ol.wp-block-list:not(.uds-list) {
		@extend .uds-list;
	}
	ul.wp-block-list,
	ol.wp-block-list {
		&.has-asu-maroon-color {
			color: $uds-color-base-gray-7 !important;
			@extend .maroon;
		}
		&.has-asu-gold-color {
			color: $uds-color-base-white !important;
			@extend .gold;
			@extend .darkmode;
		}
	}
}
--------------------------------------------------------------------*/
